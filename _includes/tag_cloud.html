{% include calculate_relative_base.html %}
{% include escape-404.html %}

<!-- ============================= -->
<!-- 🏷️ UNIVERSAL TAG CLOUD SNIPPET -->
<!-- ============================= -->
<div class="tag-cloud">
    {%- if include.context == "post" -%}
        <!-- Context: Displaying tags for a single post (e.g., at the bottom of a post) -->
        <ul class="tags {{ include.class }}">
            {%- for tag in page.tags -%}
                <!-- Each tag on this post links to the tag archive page, passing the tag name as a parameter -->
                <li>
                  <a href="{{ relativebase }}tag.html?tag={{ tag | url_encode }}"
                     class="tag {{ include.class }}">{{ tag }}</a>
                </li>
            {%- endfor -%}
        </ul>
    {%- else -%}
        <!-- Context: Displaying all tags in the whole site (the tag "cloud" or "pill" navigation) -->
        <ul class="tags">
            {%- for item in (0..site.tags.size) -%}{% unless forloop.last %}
                {%- capture this_word -%}{{ tag_words[item] | strip_newlines }}{%- endcapture -%}
                <!-- Each tag links to tag archive page, with count in parentheses -->
                <li>
                  <a href="{{ relativebase }}tag.html?tag={{ this_word | url_encode }}"
                     class="tag">
                    {{ this_word }} <span>({{ site.tags[this_word].size }})</span>
                  </a>
                </li>
            {%- endunless -%}{%- endfor -%}
        </ul>
    {%- endif -%}
</div>
