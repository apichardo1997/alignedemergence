{% include calculate_relative_base.html %}
<div class="recent-box">
  <h2 class="page-subtitle">Recent Posts</h2>

  <div class="recent-list posts-list">
    {% for post in site.posts offset:0 limit:4 %}
      {% if post.title %}
        {% capture post_url %}{{ site.baseurl }}{{ post.url }}{% endcapture %}
        {% assign post_url = post_url | replace: "//", "/" %}

        <article class="recent-post">
          <!-- 1) Title -->
          <h3 class="recent-post-title">
            <a href="{{ post_url }}">{{ post.title }}</a>
          </h3>

          <!-- 2) Excerpt (truncated to ~100 chars) -->
          <p class="recent-post-excerpt">
            {{ post.excerpt | strip_html | truncate: 100, "…" }}
          </p>

          <!-- 3) Meta: date • read time -->
          <div class="recent-post-meta">
            <time datetime="{{ post.date | date_to_xmlschema }}">
              {{ post.date | date: "%d %b, %Y" | upcase }}
            </time>
            <span class="meta-sep">•</span>
            <span>
              {{ post.content 
                 | strip_html 
                 | number_of_words 
                 | divided_by:200 
                 | plus:1 }} min read
            </span>
          </div>
        </article>

      {% endif %}
    {% endfor %}
  </div>
</div>
